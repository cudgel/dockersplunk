{
    "builders": [
        {
            "type": "docker",
            "image": "centos:7",
            "export_path": "centos7-puppet.tar",
            "volumes": {
                "splunk_data": "/srv/data"
            }
        }
    ],
    "provisioners": [
        {
            "type": "shell",
            "inline": [
                "rpm -Uvh https://yum.puppetlabs.com/puppet5/puppet5-release-el-7.noarch.rpm && yum upgrade -y && yum update -y && yum install -y puppet-agent && yum clean all"
            ]
        },
        {
            "type": "puppet-masterless",
            "puppet_bin_dir": "/opt/puppetlabs/bin",
            "manifest_file": "manifests/default.pp",
            "module_paths": "modules",
            "prevent_sudo": true,
            "ignore_exit_codes": true
        }
    ],
    "post-processors": [
        {
            "type": "docker-import",
            "repository": "cudgel/splunk",
            "tag": "0.1"
        }
    ]
}
